defaultNamespace: default
helm:

  chart: kube-prometheus-stack
  repo: https://prometheus-community.github.io/helm-charts
  version: 62.4.0
  # Path to any values files that need to be passed to helm during install.
  valuesFiles:
    - values.yaml

  ### These options control how fleet-agent deploys the bundle, they also apply
  ### for kustomize- and manifest-style bundles.
  #
  # A custom release name to deploy the chart as. If not specified a release name
  # will be generated by combining the invoking GitRepo.name + GitRepo.path.
  releaseName: kube-prometheus-stack
diff:
  comparePatches:
  - apiVersion: monitoring.coreos.com/v1
    kind: Prometheus
    operations:
    - {"op":"remove", "path":"/spec/automountServiceAccountToken"}
    - {"op":"remove", "path":"/spec/enableAdminAPI"}
    - {"op":"remove", "path":"/spec/hostNetwork"}
    - {"op":"remove", "path":"/spec/listenLocal"}
    - {"op":"remove", "path":"/spec/paused"}
    - {"op":"remove", "path":"/spec/scrapeConfigNamespaceSelector"}
    - {"op":"remove", "path":"/spec/scrapeConfigSelector"}
    - {"op":"remove", "path":"/spec/tsdb"}
#    jsonPointers: # jsonPointers allows to ignore diffs at certain json path
#    - "/spec/automountServiceAccountToken"
#    - "/spec/enableAdminAPI"
#    - "/spec/hostNetwork"
#    - "/spec/listenLocal"
#    - "/spec/paused"
#    - "/spec/scrapeConfigNamespaceSelector"
#    - "/spec/scrapeConfigSelector"
#    - "/spec/tsdb"